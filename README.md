# Port Scanner with Exploit-DB Integration

A Python-based port scanner that integrates with a local SQLite database containing the latest exploits from Exploit-DB. The project allows users to scan open ports on a target and query vulnerabilities using Exploit-DB data. This setup also includes a simple HTTP API to search for exploits by CVE or title.

## Features
- **Port Scanning**: Scan open ports on a target IP address.
- **Exploit-DB Sync**: Automatically syncs with the official Exploit-DB repository to keep the local exploit database updated.
- **HTTP API**: Query local exploits via a simple PHP-based HTTP API.
- **Flexible Timeout**: Configurable timeout for port scanning to handle slow or unresponsive networks.

---

## Table of Contents
1. [Installation](#installation)
2. [Usage](#usage)
   - [Port Scanner](#port-scanner)
   - [Exploit-DB Sync](#exploit-db-sync)
   - [HTTP API](#http-api)
3. [Crontab Setup](#crontab-setup)
4. [File Structure](#file-structure)
5. [Contributing](#contributing)
6. [License](#license)

---

## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/kdairatchi/port-scanner-exploitdb.git
   cd port-scanner-exploitdb
   ```

2. **Run the installation script** to set up dependencies and folder structure:
   ```bash
   bash ./scripts/install.sh
   ```

3. **Sync the Exploit-DB repository**:
   ```bash
   bash ./scripts/exploitdb_sync.sh
   ```

4. **Update the local SQLite database**:
   ```bash
   php update-db.php
   ```

---

## Usage

### Port Scanner
The Python script scans a range of ports on the target IP and returns the open ports. You can also configure a timeout for each connection and enable verbose output to display the scan progress.

**Syntax**:
```bash
python3 scripts/port_scanner.py <target-ip> <start-port> <end-port> [options]
```

**Options**:
- `-v, --verbose`: Enable verbose output (shows open and closed ports).
- `--timeout`: Set the connection timeout in seconds (default: 1 second).

**Example**:
```bash
python3 scripts/port_scanner.py 192.168.1.10 20 80 --timeout 2 -v
```
This will scan ports 20 to 80 on `192.168.1.10` with a 2-second timeout for each connection and display verbose output.

### Exploit-DB Sync
To keep your local exploit database updated, you can run the sync script, which will pull the latest exploits from the official Exploit-DB repository.

**Command**:
```bash
bash ./scripts/exploitdb_sync.sh
```
This will download the latest exploits to the `exploits/` folder.

### HTTP API
You can query the local SQLite database via an HTTP API for vulnerabilities related to specific CVEs or titles. The API is built with PHP and uses a local SQLite database for storage.

1. **Start the PHP server**:
   ```bash
   php -S localhost:8080
   ```

2. **Query the API**:
   - By CVE:
     ```bash
     curl http://localhost:8080/API.php?CVE=CVE-2021-12345
     ```
   - By exploit title:
     ```bash
     curl http://localhost:8080/API.php?title=Buffer+Overflow
     ```

---

## Crontab Setup

You can schedule the Exploit-DB sync to run periodically using a cron job.

For example, to sync the Exploit-DB every hour:

1. Open the crontab editor:
   ```bash
   crontab -e
   ```

2. Add the following line to schedule the sync every hour:
   ```bash
   59 * * * * bash /path/to/port-scanner-exploitdb/scripts/exploitdb_sync.sh
   ```

This will ensure that the exploit database is always up to date.

---

## File Structure

```bash
port-scanner-exploitdb/
├── exploits/                        # Folder for storing downloaded exploits
├── scripts/                         # Folder for the port scanning and exploit syncing scripts
│   ├── port_scanner.py              # Python script for port scanning
│   ├── exploitdb_sync.sh            # Shell script to sync Exploit-DB
│   └── install.sh                   # Installation script
├── update-db.php                    # PHP script to update the local SQLite database
├── exploitdb-API/                   # API folder for querying exploits
│   ├── API.php                      # HTTP API to search exploits
│   ├── exploitdb.class.php          # Class that handles Exploit-DB logic
│   └── README.md                    # API documentation
├── .gitignore                       # Git ignore file
├── README.md                        # This documentation
```

---

## Contributing

Contributions are welcome! If you'd like to improve the project, feel free to fork the repository, make changes, and submit a pull request.

1. Fork the repository.
2. Create your feature branch (`git checkout -b feature/your-feature`).
3. Commit your changes (`git commit -am 'Add new feature'`).
4. Push to the branch (`git push origin feature/your-feature`).
5. Open a pull request.

---

## License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for more details.

---

Feel free to modify the `README.md` to suit your specific needs and repository layout!
